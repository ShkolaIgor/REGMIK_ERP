# 1С Критичні виправлення - Застосовано

## Проблема з УстановитьТелоИзСтроки

### Помилка в логах:
```
11.07.2025 18:45:38 - ОШИБКА: {HTTPСервис.ERPIntegration.Модуль(415)}: 
Помилка при виклику методу контексту (УстановитьТелоИзСтроки): 
Невідповідність типів (параметр номер '3')
```

### Проблемний код:
```1c
Ответ.УстановитьТелоИзСтроки("", "application/json", "utf-8");
```

### Виправлений код:
```1c
Ответ.УстановитьТелоИзСтроки("", КодировкаТекста.UTF8, "application/json");
```

## Опис виправлення

### Неправильний порядок параметрів:
1. `Тело` (string)
2. `ТипСодержимого` (string) ← **неправильно**
3. `Кодировка` (string) ← **неправильно**

### Правильний порядок параметрів:
1. `Тело` (string)
2. `Кодировка` (КодировкаТекста) ← **правильно**
3. `ТипСодержимого` (string) ← **правильно**

## Всі виправлені місця:

### 1. Ініціалізація відповіді:
```1c
// Было:
Ответ.УстановитьТелоИзСтроки("", "application/json", "utf-8");

// Стало:
Ответ.УстановитьТелоИзСтроки("", КодировкаТекста.UTF8, "application/json");
```

### 2. Успішна відповідь:
```1c
// Было:
Ответ.УстановитьТелоИзСтроки(СтрокаJSON, "application/json", "utf-8");

// Стало:
Ответ.УстановитьТелоИзСтроки(СтрокаJSON, КодировкаТекста.UTF8, "application/json");
```

### 3. Відповідь з помилкою:
```1c
// Было:
Ответ.УстановитьТелоИзСтроки(СтрокаJSON, "application/json", "utf-8");

// Стало:
Ответ.УстановитьТелоИзСтроки(СтрокаJSON, КодировкаТекста.UTF8, "application/json");
```

## Результат

✅ **Виправлено синтаксис 1С** - використано правильний тип `КодировкаТекста.UTF8`
✅ **Правильний порядок параметрів** - кодування перед типом контенту
✅ **Оновлено документацію** - `1C_OUTGOING_INVOICES_SETUP.md` містить виправлений код

## Наступні кроки

1. Оновити код HTTP-сервісу в 1С з виправленими параметрами
2. Перетестувати endpoint `/outgoing-invoices`
3. Повинен повернути HTTP 200 замість HTTP 500

Дата виправлення: 2025-07-11 18:50