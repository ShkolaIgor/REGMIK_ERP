// –ü—Ä—è–º–∏–π —Ç–µ—Å—Ç –±–∞–Ω–∫—ñ–≤—Å—å–∫–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É –∑ —Å—Ç–∞—Ä–∏–º —Ä–∞—Ö—É–Ω–∫–æ–º

const testOldInvoice = async () => {
  try {
    console.log('üß™ === –¢–ï–°–¢ –ë–ê–ù–ö–Ü–í–°–¨–ö–û–ì–û –°–ï–†–í–Ü–°–£ –ó –°–¢–ê–†–ò–ú –†–ê–•–£–ù–ö–û–ú ===\n');
    
    // –Ü–º—ñ—Ç—É—î–º–æ –±–∞–Ω–∫—ñ–≤—Å—å–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑—ñ —Å—Ç–∞—Ä–∏–º —Ä–∞—Ö—É–Ω–∫–æ–º –†–ú00-999999 (2013)
    const oldInvoiceEmailContent = `
<br>–ë–∞–Ω–∫ –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫: –£–ö–†–°–Ü–ë–ë–ê–ù–ö<br>
<br>  09:15 <br> —Ä—É—Ö –∫–æ—à—Ç—ñ–≤ –ø–æ –∫–∞—Ä—Ç-—Ä–∞—Ö—É–Ω–∫—É<br>
<br>–∑–≥. —Ä–∞—Ö. ‚Ññ 999999 –≤—ñ–¥ 15.01.2013—Ä.<br>
<br>—Å—É–º–º–∞: 12345.67<br>
<br>—Ç–∏–ø –æ–ø–µ—Ä–∞—Ü—ñ—ó: –∑–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ<br>
<br>–∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç: –¢–µ—Å—Ç–æ–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—è –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É –¢–û–í<br>
<br>–ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É: –û–ø–ª–∞—Ç–∞ –∑–∞ —Ç–æ–≤–∞—Ä–∏ –∑–≥. —Ä–∞—Ö. ‚Ññ999999 –≤—ñ–¥ 15.01.2013—Ä., —É —Ç.—á. –ü–î–í 20% - 2057.61 –≥—Ä–Ω.,<br>
    `;
    
    console.log('üìã –Ü–º—ñ—Ç—É—î–º–æ –±–∞–Ω–∫—ñ–≤—Å—å–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É...');
    console.log('üìÑ –†–∞—Ö—É–Ω–æ–∫: –†–ú00-999999');
    console.log('üìÖ –î–∞—Ç–∞: 15.01.2013 (–±—ñ–ª—å—à–µ 12 —Ä–æ–∫—ñ–≤ —Ç–æ–º—É)');
    console.log('üí∞ –°—É–º–∞: 12345.67 UAH\n');
    
    // –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤–∏–π endpoint
    const response = await fetch('http://localhost:5000/api/test-bank-payment-processing', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        emailContent: oldInvoiceEmailContent
      })
    });
    
    const result = await response.json();
    
    console.log('üè¶ === –†–ï–ó–£–õ–¨–¢–ê–¢ –ë–ê–ù–ö–Ü–í–°–¨–ö–û–ì–û –û–ë–†–û–ë–ö–ò ===');
    console.log(`–°—Ç–∞—Ç—É—Å: ${result.success ? '–£–°–ü–Ü–•' : '–í–Ü–î–•–ò–õ–ï–ù–û'}`);
    console.log(`–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: ${result.message || '–ù–µ –≤–∫–∞–∑–∞–Ω–æ'}`);
    
    if (result.analysisResult) {
      console.log('\nüìä –ê–Ω–∞–ª—ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:');
      console.log(`   –ù–æ–º–µ—Ä —Ä–∞—Ö—É–Ω–∫—É: ${result.analysisResult.paymentInfo?.invoiceNumber}`);
      console.log(`   –°—É–º–∞: ${result.analysisResult.paymentInfo?.amount}`);
      console.log(`   –î–∞—Ç–∞ —Ä–∞—Ö—É–Ω–∫—É: ${result.analysisResult.paymentInfo?.invoiceDate}`);
    }
    
    console.log('\nüéØ === –û–ß–Ü–ö–£–í–ê–ù–ò–ô –†–ï–ó–£–õ–¨–¢–ê–¢ ===');
    console.log('   üìå –°—Ç–∞—Ä–∏–π —Ä–∞—Ö—É–Ω–æ–∫ (2013) –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –í–Ü–î–•–ò–õ–ï–ù–û —á–µ—Ä–µ–∑ 6-–º—ñ—Å—è—á–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä');
    console.log('   üìå –°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–∏–Ω–Ω–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ success: false');
    console.log('   üìå –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω–æ –≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ—Å—Ç—å —Ä–∞—Ö—É–Ω–∫—É');
    
    console.log('\nüîç === –í–ò–°–ù–û–í–û–ö ===');
    if (!result.success) {
      if (result.message && result.message.includes('6 –º—ñ—Å—è—Ü')) {
        console.log('   ‚úÖ –°–ò–°–¢–ï–ú–ê –ü–†–ê–¶–Æ–Ñ –Ü–î–ï–ê–õ–¨–ù–û');
        console.log('   ‚úÖ –°—Ç–∞—Ä–∏–π —Ä–∞—Ö—É–Ω–æ–∫ –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ —á–µ—Ä–µ–∑ 6-–º—ñ—Å—è—á–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä');
        console.log('   ‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É –∫–æ—Ä–µ–∫—Ç–Ω–µ');
      } else {
        console.log('   ‚ö†Ô∏è  –°–ò–°–¢–ï–ú–ê –ß–ê–°–¢–ö–û–í–û –ü–†–ê–¶–Æ–Ñ');
        console.log('   ‚úÖ –°—Ç–∞—Ä–∏–π —Ä–∞—Ö—É–Ω–æ–∫ –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ');
        console.log('   ‚ùì –ü—Ä–∏—á–∏–Ω–∞ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –º–æ–∂–µ –±—É—Ç–∏ —ñ–Ω—à–æ—é');
      }
    } else {
      console.log('   ‚ùå –ö–†–ò–¢–ò–ß–ù–ê –ü–†–û–ë–õ–ï–ú–ê');
      console.log('   ‚ùå –°—Ç–∞—Ä–∏–π —Ä–∞—Ö—É–Ω–æ–∫ –ù–ï –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ —Å–∏—Å—Ç–µ–º–æ—é');
      console.log('   ‚ùå 6-–º—ñ—Å—è—á–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä –ù–ï –ø—Ä–∞—Ü—é—î');
    }
    
  } catch (error) {
    console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ —Ç–µ—Å—Ç—É —Å—Ç–∞—Ä–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É:', error.message);
    console.log('\nüîß –ú–æ–∂–ª–∏–≤–∞ –ø—Ä–∏—á–∏–Ω–∞: –¢–µ—Å—Ç–æ–≤–∏–π endpoint –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π');
    console.log('üîß –°–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ —ñ–Ω—à–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º');
  }
};

testOldInvoice();