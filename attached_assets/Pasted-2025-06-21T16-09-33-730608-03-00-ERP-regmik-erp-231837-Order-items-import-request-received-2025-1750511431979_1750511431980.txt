2025-06-21T16:09:33.730608+03:00 ERP regmik-erp[231837]: 🚀 Order items import request received
2025-06-21T16:09:33.730732+03:00 ERP regmik-erp[231837]: 📁 File info: test_simple.xml (545 bytes)
2025-06-21T16:09:33.730951+03:00 ERP regmik-erp[231837]: 📝 Request body: [Object: null prototype] {}
2025-06-21T16:09:33.730994+03:00 ERP regmik-erp[231837]: ✅ Creating job import_1750511373730_0lt6i5jl5 for order all orders
2025-06-21T16:09:33.731652+03:00 ERP regmik-erp[231837]: 🚀 Starting order items import with XML buffer size: 545
2025-06-21T16:09:33.731670+03:00 ERP regmik-erp[231837]: 📄 XML preview (first 500 chars): <?xml version="1.0" standalone="yes"?>
2025-06-21T16:09:33.731687+03:00 ERP regmik-erp[231837]: <DATAPACKET Version="2.0">
2025-06-21T16:09:33.731698+03:00 ERP regmik-erp[231837]: <METADATA>
2025-06-21T16:09:33.731709+03:00 ERP regmik-erp[231837]: <FIELDS>
2025-06-21T16:09:33.731719+03:00 ERP regmik-erp[231837]: <FIELD FieldName="ID_ZAKAZ" DataType="ftString" Width="50"/>
2025-06-21T16:09:33.731730+03:00 ERP regmik-erp[231837]: <FIELD FieldName="INDEX_LISTARTICLE" DataType="ftString" Width="50"/>
2025-06-21T16:09:33.731741+03:00 ERP regmik-erp[231837]: <FIELD FieldName="COUNT_DET" DataType="ftString" Width="50"/>
2025-06-21T16:09:33.731751+03:00 ERP regmik-erp[231837]: <FIELD FieldName="CENA" DataType="ftString" Width="50"/>
2025-06-21T16:09:33.731762+03:00 ERP regmik-erp[231837]: <FIELD FieldName="NAME_ZAKAZ" DataType="ftString" Width="50"/>
2025-06-21T16:09:33.731772+03:00 ERP regmik-erp[231837]: </FIELDS>
2025-06-21T16:09:33.731783+03:00 ERP regmik-erp[231837]: </METADATA>
2025-06-21T16:09:33.731793+03:00 ERP regmik-erp[231837]: <ROWDATA>
2025-06-21T16:09:33.731809+03:00 ERP regmik-erp[231837]: <ROW ID_ZAKAZ="1" INDEX_LISTARTICLE="272" COUNT_DET="2,00" CENA="250,
2025-06-21T16:09:33.733176+03:00 ERP regmik-erp[231837]: 📊 Parsed XML structure keys: [ 'DATAPACKET' ]
2025-06-21T16:09:33.733208+03:00 ERP regmik-erp[231837]: ✅ Found 1 rows to process
2025-06-21T16:09:33.733220+03:00 ERP regmik-erp[231837]: 🔍 First row sample: {
2025-06-21T16:09:33.733232+03:00 ERP regmik-erp[231837]:   "ID_ZAKAZ": "1",
2025-06-21T16:09:33.733245+03:00 ERP regmik-erp[231837]:   "INDEX_LISTARTICLE": "272",
2025-06-21T16:09:33.733264+03:00 ERP regmik-erp[231837]:   "COUNT_DET": "2,00",
2025-06-21T16:09:33.733283+03:00 ERP regmik-erp[231837]:   "CENA": "250,00",
2025-06-21T16:09:33.733297+03:00 ERP regmik-erp[231837]:   "NAME_ZAKAZ": "1"
2025-06-21T16:09:33.733309+03:00 ERP regmik-erp[231837]: }
2025-06-21T16:09:33.733329+03:00 ERP regmik-erp[231837]: 📋 Loading orders and products from database...
2025-06-21T16:09:33.736778+03:00 ERP regmik-erp[231837]: 4:09:33 PM [express] POST /api/order-items/import-xml 200 in 17ms :: {"success":true,"jobId":"import…
2025-06-21T16:09:33.922077+03:00 ERP regmik-erp[231837]: Database connection configured for UTF-8
2025-06-21T16:09:33.925178+03:00 ERP regmik-erp[231837]: 4:09:33 PM [express] GET /api/order-items/import-xml/import_1750511373730_0lt6i5jl5/status 200 in 10…
2025-06-21T16:09:34.102583+03:00 ERP regmik-erp[231837]: Database connection configured for UTF-8
2025-06-21T16:09:34.107825+03:00 ERP regmik-erp[231837]: Database connection configured for UTF-8
2025-06-21T16:09:34.109734+03:00 ERP regmik-erp[231837]: Database connection configured for UTF-8
2025-06-21T16:09:34.111339+03:00 ERP regmik-erp[231837]: Database connection configured for UTF-8
2025-06-21T16:09:34.645954+03:00 ERP regmik-erp[231837]: 📋 Loaded 1000 orders and 25820 products
2025-06-21T16:09:34.646007+03:00 ERP regmik-erp[231837]: 🔄 About to process row 1/1
2025-06-21T16:09:34.646033+03:00 ERP regmik-erp[231837]: 📝 Row data: {
2025-06-21T16:09:34.646058+03:00 ERP regmik-erp[231837]:   "ID_ZAKAZ": "1",
2025-06-21T16:09:34.646076+03:00 ERP regmik-erp[231837]:   "INDEX_LISTARTICLE": "272",
2025-06-21T16:09:34.646094+03:00 ERP regmik-erp[231837]:   "COUNT_DET": "2,00",
2025-06-21T16:09:34.646105+03:00 ERP regmik-erp[231837]:   "CENA": "250,00",
2025-06-21T16:09:34.646115+03:00 ERP regmik-erp[231837]:   "NAME_ZAKAZ": "1"
2025-06-21T16:09:34.646125+03:00 ERP regmik-erp[231837]: }
2025-06-21T16:09:34.646136+03:00 ERP regmik-erp[231837]: === Processing row 1 ===
2025-06-21T16:09:34.646149+03:00 ERP regmik-erp[231837]: NAME_ZAKAZ: "1", INDEX_LISTARTICLE: "272"
2025-06-21T16:09:34.646161+03:00 ERP regmik-erp[231837]: ✅ Product found: SKU="272"
2025-06-21T16:09:34.646726+03:00 ERP regmik-erp[231837]: Looking for order number "1": ❌ NOT FOUND
2025-06-21T16:09:34.647132+03:00 ERP regmik-erp[231837]: Looking for order ID 1: ❌ NOT FOUND
2025-06-21T16:09:34.647147+03:00 ERP regmik-erp[231837]: ❌ Order with number "1" not found
2025-06-21T16:09:34.647160+03:00 ERP regmik-erp[231837]: ✅ Row 1 processed successfully
2025-06-21T16:09:34.647180+03:00 ERP regmik-erp[231837]: 📊 Progress: 100% (1/1)
2025-06-21T16:09:34.657460+03:00 ERP regmik-erp[231837]: 🎉 Order items import completed: 0 imported, 0 skipped, 1 errors
2025-06-21T16:09:34.951184+03:00 ERP regmik-erp[231837]: 4:09:34 PM [express] GET /api/order-items/import-xml/import_1750511373730_0lt6i5jl5/status 200 in 3m…
2025-06-21T16:09:34.992731+03:00 ERP regmik-erp[231837]: 4:09:34 PM [express] GET /api/orders 304 in 22ms :: {"orders":[{"id":52172,"orderSequenceNumber":521…