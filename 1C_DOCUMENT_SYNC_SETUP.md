# 1–° –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –î–æ–∫—É–º–µ–Ω—Ç—ñ–≤

## –û–≥–ª—è–¥

–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:
- **–ü—Ä–∏—Ö–æ–¥–Ω—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ** (–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–¢–æ–≤–∞—Ä–æ–≤–ò–£—Å–ª—É–≥)
- **–í–∏—Ö—ñ–¥–Ω—ñ —Ä–∞—Ö—É–Ω–∫–∏** (–°—á–µ—Ç–ù–∞–û–ø–ª–∞—Ç—É–ü–æ–∫—É–ø–∞—Ç–µ–ª—é)

## 1. –ú–æ–¥—É–ª—å –æ–±'—î–∫—Ç–∞ –¥–ª—è –ü—Ä–∏—Ö–æ–¥–Ω–∏—Ö –ù–∞–∫–ª–∞–¥–Ω–∏—Ö

### –î–æ–∫—É–º–µ–Ω—Ç.–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–¢–æ–≤–∞—Ä–æ–≤–ò–£—Å–ª—É–≥.–ú–æ–¥—É–ª—å–û–±—ä–µ–∫—Ç–∞

```1c
// =======================================================
// –ú–û–î–£–õ–¨ –û–ë'–Ñ–ö–¢–ê: –î–æ–∫—É–º–µ–Ω—Ç.–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–¢–æ–≤–∞—Ä–æ–≤–ò–£—Å–ª—É–≥.–ú–æ–¥—É–ª—å–û–±—ä–µ–∫—Ç–∞
// =======================================================

// –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥(–°–æ–æ–±—â–µ–Ω–∏–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        –§–∞–π–ª = –ù–æ–≤—ã–π –ó–∞–ø–∏—Å—å–¢–µ–∫—Å—Ç–∞("c:\temp\invoice_sync_log.txt", –ö–æ–¥–∏—Ä–æ–≤–∫–∞–¢–µ–∫—Å—Ç–∞.UTF8,, –ò—Å—Ç–∏–Ω–∞);
        –§–∞–π–ª.–ó–∞–ø–∏—Å–∞—Ç—å–°—Ç—Ä–æ–∫—É(–¢–µ–∫—É—â–∞—è–î–∞—Ç–∞() + ": " + –°–æ–æ–±—â–µ–Ω–∏–µ);
        –§–∞–π–ª.–ó–∞–∫—Ä—ã—Ç—å();
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è JSON
–§—É–Ω–∫—Ü–∏—è –°–æ–∑–¥–∞—Ç—åJSON(–î–∞–Ω–Ω—ã–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        // –î–ª—è 1–° 8.3.15 –∏ –Ω–æ–≤–µ–µ
        –ó–∞–ø–∏—Å—åJSON = –ù–æ–≤—ã–π –ó–∞–ø–∏—Å—åJSON;
        –ó–∞–ø–∏—Å—åJSON.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–°—Ç—Ä–æ–∫—É();
        –ó–∞–ø–∏—Å–∞—Ç—åJSON(–ó–∞–ø–∏—Å—åJSON, –î–∞–Ω–Ω—ã–µ);
        –í–æ–∑–≤—Ä–∞—Ç –ó–∞–ø–∏—Å—åJSON.–ó–∞–∫—Ä—ã—Ç—å();
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        // –î–ª—è –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π 1–°
        –ü–æ–ø—ã—Ç–∫–∞
            –í–æ–∑–≤—Ä–∞—Ç –û–±—â–µ–≥–æ–ù–∞–∑–Ω–∞—á–µ–Ω–∏—è.–û–±—ä–µ–∫—Ç–í–°—Ç—Ä–æ–∫—ÉJSON(–î–∞–Ω–Ω—ã–µ);
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è JSON: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
            –í–æ–∑–≤—Ä–∞—Ç "";
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ webhook
–§—É–Ω–∫—Ü–∏—è –û—Ç–ø—Ä–∞–≤–∏—Ç—åWebhook(URL, –î–∞–Ω–Ω—ã–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ = –ù–æ–≤—ã–π HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ("your-erp-domain.com", 443,,,, 30, –ù–æ–≤—ã–π –ó–∞—â–∏—â–µ–Ω–Ω–æ–µ–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µOpenSSL);
        –ó–∞–ø—Ä–æ—Å = –ù–æ–≤—ã–π HTTP–ó–∞–ø—Ä–æ—Å(URL);
        –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–¢–µ–ª–æ–ò–∑–°—Ç—Ä–æ–∫–∏(–î–∞–Ω–Ω—ã–µ, –ö–æ–¥–∏—Ä–æ–≤–∫–∞–¢–µ–∫—Å—Ç–∞.UTF8);
        –ó–∞–ø—Ä–æ—Å.–ó–∞–≥–æ–ª–æ–≤–∫–∏.–í—Å—Ç–∞–≤–∏—Ç—å("Content-Type", "application/json");
        –ó–∞–ø—Ä–æ—Å.–ó–∞–≥–æ–ª–æ–≤–∫–∏.–í—Å—Ç–∞–≤–∏—Ç—å("User-Agent", "1C-Enterprise/8.3");
        
        –û—Ç–≤–µ—Ç = HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.–û—Ç–ø—Ä–∞–≤–∏—Ç—å–î–ª—è–û–±—Ä–∞–±–æ—Ç–∫–∏(–ó–∞–ø—Ä–æ—Å);
        
        –ï—Å–ª–∏ –û—Ç–≤–µ—Ç.–ö–æ–¥–°–æ—Å—Ç–æ—è–Ω–∏—è = 200 –¢–æ–≥–¥–∞
            –í–æ–∑–≤—Ä–∞—Ç –ò—Å—Ç–∏–Ω–∞;
        –ò–Ω–∞—á–µ
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ webhook: " + –û—Ç–≤–µ—Ç.–ö–æ–¥–°–æ—Å—Ç–æ—è–Ω–∏—è + " - " + –û—Ç–≤–µ—Ç.–ü–æ–ª—É—á–∏—Ç—å–¢–µ–ª–æ–ö–∞–∫–°—Ç—Ä–æ–∫—É());
            –í–æ–∑–≤—Ä–∞—Ç –õ–æ–∂—å;
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–ò—Å–∫–ª—é—á–µ–Ω–∏–µ webhook: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
        –í–æ–∑–≤—Ä–∞—Ç –õ–æ–∂—å;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω–æ–π
–§—É–Ω–∫—Ü–∏—è –û—Ç–ø—Ä–∞–≤–∏—Ç—å–î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π(–ù–∞–∫–ª–∞–¥–Ω–∞—è, –î–µ–π—Å—Ç–≤–∏–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        –î–∞–Ω–Ω—ã–µ = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
        –î–∞–Ω–Ω—ã–µ.–í—Å—Ç–∞–≤–∏—Ç—å("action", –î–µ–π—Å—Ç–≤–∏–µ);
        
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–°—Å—ã–ª–∫–∞–î–æ–∫—É–º–µ–Ω—Ç–∞", –°—Ç—Ä–æ–∫–∞(–ù–∞–∫–ª–∞–¥–Ω–∞—è.–°—Å—ã–ª–∫–∞));
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–ù–æ–º–µ—Ä–î–æ–∫—É–º–µ–Ω—Ç–∞", –ù–∞–∫–ª–∞–¥–Ω–∞—è.–ù–æ–º–µ—Ä);
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–î–∞—Ç–∞–î–æ–∫—É–º–µ–Ω—Ç–∞", –ù–∞–∫–ª–∞–¥–Ω–∞—è.–î–∞—Ç–∞);
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫", –ù–∞–∫–ª–∞–¥–Ω–∞—è.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ);
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–Ñ–î–†–ü–û–£", –ù–∞–∫–ª–∞–¥–Ω–∞—è.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç.–ö–æ–¥–ü–æ–ï–î–†–ü–û–£);
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞", –ù–∞–∫–ª–∞–¥–Ω–∞—è.–°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞);
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–¥–í–∞–ª—é—Ç—ã", –ù–∞–∫–ª–∞–¥–Ω–∞—è.–í–∞–ª—é—Ç–∞–î–æ–∫—É–º–µ–Ω—Ç–∞.–ö–æ–¥);
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–ü—Ä–æ–≤–µ–¥–µ–Ω", –ù–∞–∫–ª–∞–¥–Ω–∞—è.–ü—Ä–æ–≤–µ–¥–µ–Ω);
        
        // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
        –ü–æ–ø—ã—Ç–∫–∞
            –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π", –ù–∞–∫–ª–∞–¥–Ω–∞—è.–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π);
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π", "");
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
        
        // –ü–æ–∑–∏—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
        –ü–æ–∑–∏—Ü–∏–∏ = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
        –î–ª—è –ö–∞–∂–¥–æ–≥–æ –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞ –ò–∑ –ù–∞–∫–ª–∞–¥–Ω–∞—è.–¢–æ–≤–∞—Ä—ã –¶–∏–∫–ª
            –ü–æ–∑–∏—Ü–∏—è = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–¢–æ–≤–∞—Ä–∞", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–¥–¢–æ–≤–∞—Ä–∞", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ö–æ–¥);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–¶–µ–Ω–∞", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–¶–µ–Ω–∞);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–°—É–º–º–∞", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–°—É–º–º–∞);
            
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
            –ü–æ–ø—ã—Ç–∫–∞
                –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ï–¥–∏–Ω–∏—Ü–∞–ò–∑–º–µ—Ä–µ–Ω–∏—è", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–ï–¥–∏–Ω–∏—Ü–∞–ò–∑–º–µ—Ä–µ–Ω–∏—è.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ);
            –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
                –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ï–¥–∏–Ω–∏—Ü–∞–ò–∑–º–µ—Ä–µ–Ω–∏—è", "");
            –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
            
            –ü–æ–∑–∏—Ü–∏–∏.–î–æ–±–∞–≤–∏—Ç—å(–ü–æ–∑–∏—Ü–∏—è);
        –ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
        
        –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π.–í—Å—Ç–∞–≤–∏—Ç—å("positions", –ü–æ–∑–∏—Ü–∏–∏);
        –î–∞–Ω–Ω—ã–µ.–í—Å—Ç–∞–≤–∏—Ç—å("invoiceData", –î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π);
        
        JSON–°—Ç—Ä–æ–∫–∞ = –°–æ–∑–¥–∞—Ç—åJSON(–î–∞–Ω–Ω—ã–µ);
        –ï—Å–ª–∏ –ü—É—Å—Ç–∞—è–°—Ç—Ä–æ–∫–∞(JSON–°—Ç—Ä–æ–∫–∞) –¢–æ–≥–¥–∞
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–ü—É—Å—Ç–æ–π JSON –¥–ª—è –Ω–∞–∫–ª–∞–¥–Ω–æ–π: " + –ù–∞–∫–ª–∞–¥–Ω–∞—è.–ù–æ–º–µ—Ä);
            –í–æ–∑–≤—Ä–∞—Ç –õ–æ–∂—å;
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        –†–µ–∑—É–ª—å—Ç–∞—Ç = –û—Ç–ø—Ä–∞–≤–∏—Ç—åWebhook("/api/webhook/1c/invoices", JSON–°—Ç—Ä–æ–∫–∞);
        
        –ï—Å–ª–∏ –†–µ–∑—É–ª—å—Ç–∞—Ç –¢–æ–≥–¥–∞
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞–∫–ª–∞–¥–Ω–∞—è: " + –ù–∞–∫–ª–∞–¥–Ω–∞—è.–ù–æ–º–µ—Ä + " (" + –î–µ–π—Å—Ç–≤–∏–µ + ")");
        –ò–Ω–∞—á–µ
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–∫–ª–∞–¥–Ω–æ–π: " + –ù–∞–∫–ª–∞–¥–Ω–∞—è.–ù–æ–º–µ—Ä);
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        –í–æ–∑–≤—Ä–∞—Ç –†–µ–∑—É–ª—å—Ç–∞—Ç;
        
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–∫–ª–∞–¥–Ω–æ–π: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
        –í–æ–∑–≤—Ä–∞—Ç –õ–æ–∂—å;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏

// ========================================
// –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô –î–û–ö–£–ú–ï–ù–¢–ê
// ========================================

// –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü—Ä–∏–ó–∞–ø–∏—Å–∏(–û—Ç–∫–∞–∑)
    –ï—Å–ª–∏ –û—Ç–∫–∞–∑ –¢–æ–≥–¥–∞
        –í–æ–∑–≤—Ä–∞—Ç;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –ü–æ–ø—ã—Ç–∫–∞
        –î–µ–π—Å—Ç–≤–∏–µ = ?(–≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç.–≠—Ç–æ–ù–æ–≤—ã–π(), "create", "update");
        –û—Ç–ø—Ä–∞–≤–∏—Ç—å–î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π(–≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç, –î–µ–π—Å—Ç–≤–∏–µ);
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–∞–∫–ª–∞–¥–Ω–æ–π: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü–µ—Ä–µ–¥–£–¥–∞–ª–µ–Ω–∏–µ–º(–û—Ç–∫–∞–∑)
    –ï—Å–ª–∏ –û—Ç–∫–∞–∑ –¢–æ–≥–¥–∞
        –í–æ–∑–≤—Ä–∞—Ç;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –ü–æ–ø—ã—Ç–∫–∞
        –û—Ç–ø—Ä–∞–≤–∏—Ç—å–î–∞–Ω–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω–æ–π(–≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç, "delete");
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞–∫–ª–∞–¥–Ω–æ–π: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã
```

## 2. –ú–æ–¥—É–ª—å –æ–±'—î–∫—Ç–∞ –¥–ª—è –í–∏—Ö—ñ–¥–Ω–∏—Ö –†–∞—Ö—É–Ω–∫—ñ–≤

### –î–æ–∫—É–º–µ–Ω—Ç.–°—á–µ—Ç–ù–∞–û–ø–ª–∞—Ç—É–ü–æ–∫—É–ø–∞—Ç–µ–ª—é.–ú–æ–¥—É–ª—å–û–±—ä–µ–∫—Ç–∞

```1c
// =======================================================
// –ú–û–î–£–õ–¨ –û–ë'–Ñ–ö–¢–ê: –î–æ–∫—É–º–µ–Ω—Ç.–°—á–µ—Ç–ù–∞–û–ø–ª–∞—Ç—É–ü–æ–∫—É–ø–∞—Ç–µ–ª—é.–ú–æ–¥—É–ª—å–û–±—ä–µ–∫—Ç–∞
// =======================================================

// –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥(–°–æ–æ–±—â–µ–Ω–∏–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        –§–∞–π–ª = –ù–æ–≤—ã–π –ó–∞–ø–∏—Å—å–¢–µ–∫—Å—Ç–∞("c:\temp\outgoing_invoice_sync_log.txt", –ö–æ–¥–∏—Ä–æ–≤–∫–∞–¢–µ–∫—Å—Ç–∞.UTF8,, –ò—Å—Ç–∏–Ω–∞);
        –§–∞–π–ª.–ó–∞–ø–∏—Å–∞—Ç—å–°—Ç—Ä–æ–∫—É(–¢–µ–∫—É—â–∞—è–î–∞—Ç–∞() + ": " + –°–æ–æ–±—â–µ–Ω–∏–µ);
        –§–∞–π–ª.–ó–∞–∫—Ä—ã—Ç—å();
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è JSON
–§—É–Ω–∫—Ü–∏—è –°–æ–∑–¥–∞—Ç—åJSON(–î–∞–Ω–Ω—ã–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        // –î–ª—è 1–° 8.3.15 –∏ –Ω–æ–≤–µ–µ
        –ó–∞–ø–∏—Å—åJSON = –ù–æ–≤—ã–π –ó–∞–ø–∏—Å—åJSON;
        –ó–∞–ø–∏—Å—åJSON.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–°—Ç—Ä–æ–∫—É();
        –ó–∞–ø–∏—Å–∞—Ç—åJSON(–ó–∞–ø–∏—Å—åJSON, –î–∞–Ω–Ω—ã–µ);
        –í–æ–∑–≤—Ä–∞—Ç –ó–∞–ø–∏—Å—åJSON.–ó–∞–∫—Ä—ã—Ç—å();
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        // –î–ª—è –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π 1–°
        –ü–æ–ø—ã—Ç–∫–∞
            –í–æ–∑–≤—Ä–∞—Ç –û–±—â–µ–≥–æ–ù–∞–∑–Ω–∞—á–µ–Ω–∏—è.–û–±—ä–µ–∫—Ç–í–°—Ç—Ä–æ–∫—ÉJSON(–î–∞–Ω–Ω—ã–µ);
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è JSON: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
            –í–æ–∑–≤—Ä–∞—Ç "";
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ webhook
–§—É–Ω–∫—Ü–∏—è –û—Ç–ø—Ä–∞–≤–∏—Ç—åWebhook(URL, –î–∞–Ω–Ω—ã–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ = –ù–æ–≤—ã–π HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ("your-erp-domain.com", 443,,,, 30, –ù–æ–≤—ã–π –ó–∞—â–∏—â–µ–Ω–Ω–æ–µ–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µOpenSSL);
        –ó–∞–ø—Ä–æ—Å = –ù–æ–≤—ã–π HTTP–ó–∞–ø—Ä–æ—Å(URL);
        –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–¢–µ–ª–æ–ò–∑–°—Ç—Ä–æ–∫–∏(–î–∞–Ω–Ω—ã–µ, –ö–æ–¥–∏—Ä–æ–≤–∫–∞–¢–µ–∫—Å—Ç–∞.UTF8);
        –ó–∞–ø—Ä–æ—Å.–ó–∞–≥–æ–ª–æ–≤–∫–∏.–í—Å—Ç–∞–≤–∏—Ç—å("Content-Type", "application/json");
        –ó–∞–ø—Ä–æ—Å.–ó–∞–≥–æ–ª–æ–≤–∫–∏.–í—Å—Ç–∞–≤–∏—Ç—å("User-Agent", "1C-Enterprise/8.3");
        
        –û—Ç–≤–µ—Ç = HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.–û—Ç–ø—Ä–∞–≤–∏—Ç—å–î–ª—è–û–±—Ä–∞–±–æ—Ç–∫–∏(–ó–∞–ø—Ä–æ—Å);
        
        –ï—Å–ª–∏ –û—Ç–≤–µ—Ç.–ö–æ–¥–°–æ—Å—Ç–æ—è–Ω–∏—è = 200 –¢–æ–≥–¥–∞
            –í–æ–∑–≤—Ä–∞—Ç –ò—Å—Ç–∏–Ω–∞;
        –ò–Ω–∞—á–µ
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ webhook: " + –û—Ç–≤–µ—Ç.–ö–æ–¥–°–æ—Å—Ç–æ—è–Ω–∏—è + " - " + –û—Ç–≤–µ—Ç.–ü–æ–ª—É—á–∏—Ç—å–¢–µ–ª–æ–ö–∞–∫–°—Ç—Ä–æ–∫—É());
            –í–æ–∑–≤—Ä–∞—Ç –õ–æ–∂—å;
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–ò—Å–∫–ª—é—á–µ–Ω–∏–µ webhook: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
        –í–æ–∑–≤—Ä–∞—Ç –õ–æ–∂—å;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É
–§—É–Ω–∫—Ü–∏—è –û—Ç–ø—Ä–∞–≤–∏—Ç—å–î–∞–Ω–Ω—ã–µ–í–∏—Ö—ñ–¥–Ω–æ–≥–æ–†–∞—Ö—É–Ω–∫—É(–†–∞—Ö—É–Ω–æ–∫, –î–µ–π—Å—Ç–≤–∏–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        –î–∞–Ω–Ω—ã–µ = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
        –î–∞–Ω–Ω—ã–µ.–í—Å—Ç–∞–≤–∏—Ç—å("action", –î–µ–π—Å—Ç–≤–∏–µ);
        
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–°—Å—ã–ª–∫–∞–î–æ–∫—É–º–µ–Ω—Ç–∞", –°—Ç—Ä–æ–∫–∞(–†–∞—Ö—É–Ω–æ–∫.–°—Å—ã–ª–∫–∞));
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ù–æ–º–µ—Ä–î–æ–∫—É–º–µ–Ω—Ç–∞", –†–∞—Ö—É–Ω–æ–∫.–ù–æ–º–µ—Ä);
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–î–∞—Ç–∞–î–æ–∫—É–º–µ–Ω—Ç–∞", –†–∞—Ö—É–Ω–æ–∫.–î–∞—Ç–∞);
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–ª–∏–µ–Ω—Ç", –†–∞—Ö—É–Ω–æ–∫.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ);
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–Ñ–î–†–ü–û–£", –†–∞—Ö—É–Ω–æ–∫.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç.–ö–æ–¥–ü–æ–ï–î–†–ü–û–£);
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞", –†–∞—Ö—É–Ω–æ–∫.–°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞);
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–¥–í–∞–ª—é—Ç—ã", –†–∞—Ö—É–Ω–æ–∫.–í–∞–ª—é—Ç–∞–î–æ–∫—É–º–µ–Ω—Ç–∞.–ö–æ–¥);
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ü—Ä–æ–≤–µ–¥–µ–Ω", –†–∞—Ö—É–Ω–æ–∫.–ü—Ä–æ–≤–µ–¥–µ–Ω);
        
        // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
        –ü–æ–ø—ã—Ç–∫–∞
            –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π", –†–∞—Ö—É–Ω–æ–∫.–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π);
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π", "");
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
        
        –ü–æ–ø—ã—Ç–∫–∞
            –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–î–∞—Ç–∞–û–ø–ª–∞—Ç—ã", –†–∞—Ö—É–Ω–æ–∫.–î–∞—Ç–∞–û–ø–ª–∞—Ç—ã);
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–î–∞—Ç–∞–û–ø–ª–∞—Ç—ã", '00010101');
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
        
        –ü–æ–ø—ã—Ç–∫–∞
            –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–¥–ö–ª–∏–µ–Ω—Ç–∞", –†–∞—Ö—É–Ω–æ–∫.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç.–ö–æ–¥);
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–¥–ö–ª–∏–µ–Ω—Ç–∞", "");
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
        
        –ü–æ–ø—ã—Ç–∫–∞
            –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ò–ù–ù–ö–ª–∏–µ–Ω—Ç–∞", –†–∞—Ö—É–Ω–æ–∫.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç.–ò–ù–ù);
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("–ò–ù–ù–ö–ª–∏–µ–Ω—Ç–∞", "");
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
        
        // –ü–æ–∑–∏—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
        –ü–æ–∑–∏—Ü–∏–∏ = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
        –î–ª—è –ö–∞–∂–¥–æ–≥–æ –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞ –ò–∑ –†–∞—Ö—É–Ω–æ–∫.–¢–æ–≤–∞—Ä—ã –¶–∏–∫–ª
            –ü–æ–∑–∏—Ü–∏—è = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–¢–æ–≤–∞—Ä–∞", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–¥–¢–æ–≤–∞—Ä–∞", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ö–æ–¥);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–¶–µ–Ω–∞", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–¶–µ–Ω–∞);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–°—É–º–º–∞", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–°—É–º–º–∞);
            
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
            –ü–æ–ø—ã—Ç–∫–∞
                –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ï–¥–∏–Ω–∏—Ü–∞–ò–∑–º–µ—Ä–µ–Ω–∏—è", –°—Ç—Ä–æ–∫–∞–¢–æ–≤–∞—Ä–∞.–ï–¥–∏–Ω–∏—Ü–∞–ò–∑–º–µ—Ä–µ–Ω–∏—è.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ);
            –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
                –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ï–¥–∏–Ω–∏—Ü–∞–ò–∑–º–µ—Ä–µ–Ω–∏—è", "");
            –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
            
            –ü–æ–∑–∏—Ü–∏–∏.–î–æ–±–∞–≤–∏—Ç—å(–ü–æ–∑–∏—Ü–∏—è);
        –ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
        
        –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É.–í—Å—Ç–∞–≤–∏—Ç—å("positions", –ü–æ–∑–∏—Ü–∏–∏);
        –î–∞–Ω–Ω—ã–µ.–í—Å—Ç–∞–≤–∏—Ç—å("invoiceData", –î–∞–Ω–Ω—ã–µ–†–∞—Ö—É–Ω–∫—É);
        
        JSON–°—Ç—Ä–æ–∫–∞ = –°–æ–∑–¥–∞—Ç—åJSON(–î–∞–Ω–Ω—ã–µ);
        –ï—Å–ª–∏ –ü—É—Å—Ç–∞—è–°—Ç—Ä–æ–∫–∞(JSON–°—Ç—Ä–æ–∫–∞) –¢–æ–≥–¥–∞
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–ü—É—Å—Ç–æ–π JSON –¥–ª—è –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É: " + –†–∞—Ö—É–Ω–æ–∫.–ù–æ–º–µ—Ä);
            –í–æ–∑–≤—Ä–∞—Ç –õ–æ–∂—å;
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        –†–µ–∑—É–ª—å—Ç–∞—Ç = –û—Ç–ø—Ä–∞–≤–∏—Ç—åWebhook("/api/webhook/1c/outgoing-invoices", JSON–°—Ç—Ä–æ–∫–∞);
        
        –ï—Å–ª–∏ –†–µ–∑—É–ª—å—Ç–∞—Ç –¢–æ–≥–¥–∞
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤–∏—Ö—ñ–¥–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫: " + –†–∞—Ö—É–Ω–æ–∫.–ù–æ–º–µ—Ä + " (" + –î–µ–π—Å—Ç–≤–∏–µ + ")");
        –ò–Ω–∞—á–µ
            –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É: " + –†–∞—Ö—É–Ω–æ–∫.–ù–æ–º–µ—Ä);
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        –í–æ–∑–≤—Ä–∞—Ç –†–µ–∑—É–ª—å—Ç–∞—Ç;
        
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
        –í–æ–∑–≤—Ä–∞—Ç –õ–æ–∂—å;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏

// ========================================
// –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô –î–û–ö–£–ú–ï–ù–¢–ê
// ========================================

// –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü—Ä–∏–ó–∞–ø–∏—Å–∏(–û—Ç–∫–∞–∑)
    –ï—Å–ª–∏ –û—Ç–∫–∞–∑ –¢–æ–≥–¥–∞
        –í–æ–∑–≤—Ä–∞—Ç;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –ü–æ–ø—ã—Ç–∫–∞
        –î–µ–π—Å—Ç–≤–∏–µ = ?(–≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç.–≠—Ç–æ–ù–æ–≤—ã–π(), "create", "update");
        –û—Ç–ø—Ä–∞–≤–∏—Ç—å–î–∞–Ω–Ω—ã–µ–í–∏—Ö—ñ–¥–Ω–æ–≥–æ–†–∞—Ö—É–Ω–∫—É(–≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç, –î–µ–π—Å—Ç–≤–∏–µ);
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü–µ—Ä–µ–¥–£–¥–∞–ª–µ–Ω–∏–µ–º(–û—Ç–∫–∞–∑)
    –ï—Å–ª–∏ –û—Ç–∫–∞–∑ –¢–æ–≥–¥–∞
        –í–æ–∑–≤—Ä–∞—Ç;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –ü–æ–ø—ã—Ç–∫–∞
        –û—Ç–ø—Ä–∞–≤–∏—Ç—å–î–∞–Ω–Ω—ã–µ–í–∏—Ö—ñ–¥–Ω–æ–≥–æ–†–∞—Ö—É–Ω–∫—É(–≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç, "delete");
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–õ–æ–≥("–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã
```

## üîß –ö—Ä–æ–∫–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ü—Ä–∏—Ö–æ–¥–Ω–∏—Ö –ù–∞–∫–ª–∞–¥–Ω–∏—Ö

1. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ –º–æ–¥—É–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–∞**:
   - –î–æ–∫—É–º–µ–Ω—Ç–∏ ‚Üí –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–¢–æ–≤–∞—Ä–æ–≤–ò–£—Å–ª—É–≥
   - –ü—Ä–∞–≤–∏–π –∫–ª—ñ–∫ ‚Üí –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥—É–ª—å –æ–±—ä–µ–∫—Ç–∞
   - –Ø–∫—â–æ –º–æ–¥—É–ª—å –Ω–µ —ñ—Å–Ω—É—î, —Å—Ç–≤–æ—Ä—ñ—Ç—å: –ú–æ–¥—É–ª—å –æ–±—ä–µ–∫—Ç–∞ ‚Üí –°–æ–∑–¥–∞—Ç—å

2. **–î–æ–¥–∞–π—Ç–µ –∫–æ–¥**:
   - –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–¥ –¥–ª—è –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–¢–æ–≤–∞—Ä–æ–≤–ò–£—Å–ª—É–≥
   - –ó–∞–º—ñ–Ω—ñ—Ç—å `your-erp-domain.com` –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π –¥–æ–º–µ–Ω

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –í–∏—Ö—ñ–¥–Ω–∏—Ö –†–∞—Ö—É–Ω–∫—ñ–≤

1. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ –º–æ–¥—É–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–∞**:
   - –î–æ–∫—É–º–µ–Ω—Ç–∏ ‚Üí –°—á–µ—Ç–ù–∞–û–ø–ª–∞—Ç—É–ü–æ–∫—É–ø–∞—Ç–µ–ª—é
   - –ü—Ä–∞–≤–∏–π –∫–ª—ñ–∫ ‚Üí –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥—É–ª—å –æ–±—ä–µ–∫—Ç–∞
   - –Ø–∫—â–æ –º–æ–¥—É–ª—å –Ω–µ —ñ—Å–Ω—É—î, —Å—Ç–≤–æ—Ä—ñ—Ç—å: –ú–æ–¥—É–ª—å –æ–±—ä–µ–∫—Ç–∞ ‚Üí –°–æ–∑–¥–∞—Ç—å

2. **–î–æ–¥–∞–π—Ç–µ –∫–æ–¥**:
   - –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–¥ –¥–ª—è –°—á–µ—Ç–ù–∞–û–ø–ª–∞—Ç—É–ü–æ–∫—É–ø–∞—Ç–µ–ª—é
   - –ó–∞–º—ñ–Ω—ñ—Ç—å `your-erp-domain.com` –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π –¥–æ–º–µ–Ω

### 3. –ó–∞–º—ñ–Ω—ñ—Ç—å URL —É –≤—Å—ñ—Ö –º–æ–¥—É–ª—è—Ö

–ó–Ω–∞–π–¥—ñ—Ç—å —É –∫–æ–∂–Ω–æ–º—É –º–æ–¥—É–ª—ñ:
```1c
HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ = –ù–æ–≤—ã–π HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ("your-erp-domain.com", 443,,,, 30, –ù–æ–≤—ã–π –ó–∞—â–∏—â–µ–Ω–Ω–æ–µ–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µOpenSSL);
```

–ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞:
```1c
HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ = –ù–æ–≤—ã–π HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ("–≤–∞—à-–¥–æ–º–µ–Ω.com", 443,,,, 30, –ù–æ–≤—ã–π –ó–∞—â–∏—â–µ–Ω–Ω–æ–µ–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µOpenSSL);
```

### 4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—é

1. –£ –∫–æ–∂–Ω–æ–º—É –º–æ–¥—É–ª—ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **Ctrl+F7**
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –Ω–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫
3. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –º–æ–¥—É–ª—ñ

### 5. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ

1. **–ü—Ä–∏—Ö–æ–¥–Ω—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ**:
   - –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–±–æ –∑–º—ñ–Ω—ñ—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—É
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥: `c:\temp\invoice_sync_log.txt`

2. **–í–∏—Ö—ñ–¥–Ω—ñ —Ä–∞—Ö—É–Ω–∫–∏**:
   - –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–±–æ –∑–º—ñ–Ω—ñ—Ç—å —Ä–∞—Ö—É–Ω–æ–∫
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥: `c:\temp\outgoing_invoice_sync_log.txt`

## ‚úÖ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### –ü—Ä–∏—Ö–æ–¥–Ω—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ –≤—Å—ñ—Ö –ø–æ–∑–∏—Ü—ñ–π —Ç–æ–≤–∞—Ä—ñ–≤
- ‚úÖ –ë–µ–∑–ø–µ—á–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–ª—ñ–≤
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è

### –í–∏—Ö—ñ–¥–Ω—ñ —Ä–∞—Ö—É–Ω–∫–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ –≤—Å—ñ—Ö –ø–æ–∑–∏—Ü—ñ–π —Ç–æ–≤–∞—Ä—ñ–≤
- ‚úÖ –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–ª—è –∫–ª—ñ—î–Ω—Ç–∞ (–∫–æ–¥, –Ü–ü–ù)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è

## üìù –§–∞–π–ª–∏ –ª–æ–≥—ñ–≤

- **–ö–ª—ñ—î–Ω—Ç–∏**: `c:\temp\client_sync_log.txt`
- **–ü—Ä–∏—Ö–æ–¥–Ω—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ**: `c:\temp\invoice_sync_log.txt`
- **–í–∏—Ö—ñ–¥–Ω—ñ —Ä–∞—Ö—É–Ω–∫–∏**: `c:\temp\outgoing_invoice_sync_log.txt`

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä –≤—Å—ñ –∑–º—ñ–Ω–∏ –≤ 1–° –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—é—Ç—å—Å—è –∑ ERP —Å–∏—Å—Ç–µ–º–æ—é:
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–∏—Ö–æ–¥–Ω–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –≤–∏—Ö—ñ–¥–Ω–∏—Ö —Ä–∞—Ö—É–Ω–∫—ñ–≤