# ‚úÖ REGMIK ERP - –ì–æ—Ç–æ–≤–æ –¥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ Proxmox

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–¥–∞–∫—à–Ω –∑–±—ñ—Ä–∫–∏
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–º–∏–ª–∫—É "body is disturbed locked" —É query client
- ‚úÖ –î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–º–ø–∞–Ω—ñ—è–º–∏ –¥–æ db-storage.ts
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä –±–µ–∑ Vite –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (server/production.ts)
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–º–∏–ª–∫—É initialize() —É nova-poshta-cache.ts
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –ø—Ä–æ–¥–∞–∫—à–Ω –∑–±—ñ—Ä–∫—É –ª–æ–∫–∞–ª—å–Ω–æ - –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ

## –©–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–º–ø–∞–Ω—ñ—è–º–∏
```typescript
// –î–æ–¥–∞–Ω–æ –¥–æ DatabaseStorage:
- getCompanies(): Promise<Company[]>
- getCompany(id: number): Promise<Company | undefined>
- createCompany(data: InsertCompany): Promise<Company>
- updateCompany(id: number, data: Partial<InsertCompany>): Promise<Company>
- deleteCompany(id: number): Promise<boolean>
```

### 2. –ü—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä
```typescript
// server/production.ts - –±–µ–∑ Vite –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Express –∑–∞–º—ñ—Å—Ç—å Vite dev server
- –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ —Å–µ—Ä–≤–µ—Ä—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ express.static
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```

### 3. –ö–µ—à –ù–æ–≤–æ—ó –ü–æ—à—Ç–∏
```typescript
// –î–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥ initialize()
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ API –±–µ–∑ –∑—É–ø–∏–Ω–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –õ–æ–≥—É–≤–∞–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
```

## –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### –ù–∞ –º–∞—à–∏–Ω—ñ —Ä–æ–∑—Ä–æ–±–∫–∏:
```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –∑–±—ñ—Ä–∫—É
chmod +x build-for-proxmox.sh
./build-for-proxmox.sh

# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–∞ Proxmox —Å–µ—Ä–≤–µ—Ä
scp -r deployment-package/* root@192.168.0.247:/tmp/regmik-update/
```

### –ù–∞ Proxmox —Å–µ—Ä–≤–µ—Ä—ñ:
```bash
# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
ssh root@192.168.0.247

# –ó—É–ø–∏–Ω–∫–∞ —Ç–∞ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
sudo systemctl stop regmik-erp
sudo cp -r /opt/REGMIK_ERP /opt/REGMIK_ERP_backup_$(date +%Y%m%d_%H%M%S)

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è
sudo cp -r /tmp/regmik-update/* /opt/REGMIK_ERP/
sudo chown -R regmik:regmik /opt/REGMIK_ERP
sudo chmod +x /opt/REGMIK_ERP/start-production.sh

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —Ç–∞ –∑–∞–ø—É—Å–∫
cd /opt/REGMIK_ERP
sudo -u regmik npm install --production
sudo -u regmik npm run db:push
sudo systemctl start regmik-erp

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
sudo systemctl status regmik-erp
sudo journalctl -u regmik-erp -f
```

## –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
- ‚úÖ –ú–æ–¥—É–ª—å "–ö–æ–º–ø–∞–Ω—ñ—ó" –ø—Ä–∞—Ü—é—î –ø–æ–≤–Ω—ñ—Å—Ç—é
- ‚úÖ –í—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–º–∏–ª–∫–∏ "function not found"
- ‚úÖ –í—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–º–∏–ª–∫–∏ Vite –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- ‚úÖ –ö–µ—à –ù–æ–≤–æ—ó –ü–æ—à—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- ‚úÖ –í—Å—ñ 21 –º–æ–¥—É–ª—å ERP —Å–∏—Å—Ç–µ–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ API –∫–æ–º–ø–∞–Ω—ñ–π
curl -b cookies.txt http://192.168.0.247:5000/api/companies

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
curl http://192.168.0.247:5000/
```

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è! üöÄ**