# Відкат 1C Endpoint Унифікації - July 11, 2025

## Проблема
Після унифікації endpoints користувач повідомив, що `/invoices` не працює для вихідних рахунків.

## Причина
Унифікація виявилася невдалою - 1С система розпізнає різні типи документів через окремі endpoints, а не через параметри.

## Рішення - Відкат до оригінальної структури

### Вхідні накладні
```
POST /invoices
{
  "action": "getInvoices",
  "limit": 100
}
```

### Вихідні рахунки  
```
POST /outgoing-invoices
{
  "limit": 100
}
```

## Виправлення коду

### get1COutgoingInvoices()
```javascript
// Використовуємо окремий endpoint /outgoing-invoices для вихідних рахунків
let outgoingUrl = config.baseUrl.trim();
if (!outgoingUrl.endsWith('/')) outgoingUrl += '/';
outgoingUrl += 'outgoing-invoices';  // Повернуто з 'invoices' на 'outgoing-invoices'
```

### Параметри запиту
```javascript
// Видалено action параметр для вихідних рахунків
body: JSON.stringify({ 
  limit: 100  // Без action параметра
})
```

## Остаточна структура URL

### Базовий URL
`http://baf.regmik.ua/bitrix/hs/erp`

### Endpoints
- **Вхідні накладні**: `/invoices` з `action=getInvoices`
- **Вихідні рахунки**: `/outgoing-invoices` без action параметра

## Переваги відкату
1. **Працездатність** - кожен endpoint відповідає за свій тип документів
2. **Ясність** - чітке розмежування функціоналу
3. **Сумісність** - відповідає архітектурі 1С HTTP-сервісів
4. **Надійність** - перевірена користувачем структура

## Тестування
- ✅ Код виправлено: `/outgoing-invoices` endpoint
- ✅ Параметри очищено: видалено action для вихідних рахунків
- ✅ Логування оновлено: правильні повідомлення
- ❌ Потрібне тестування: перевірка з реальними даними

Дата виправлення: 2025-07-11