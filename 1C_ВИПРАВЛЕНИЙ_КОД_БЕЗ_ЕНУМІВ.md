# –í–ò–ü–†–ê–í–õ–ï–ù–ò–ô –ö–û–î 1–° –ë–ï–ó –ü–†–û–ë–õ–ï–ú–ù–ò–• –ü–ï–†–ï–†–ê–•–£–í–ê–ù–¨

## –ü—Ä–æ–±–ª–µ–º–∞ –≤–∏—Ä—ñ—à–µ–Ω–∞
–ó–∞–º—ñ–Ω–µ–Ω–æ `–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ.–¢–∏–ø—ã–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã.–¢–æ–≤–∞—Ä` –Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –∑–∞ –Ω–∞–∑–≤–∞–º–∏ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏.

## –û—Å–Ω–æ–≤–Ω–∏–π HTTP-–æ–±—Ä–æ–±–Ω–∏–∫ (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏–π)

```1c
–§—É–Ω–∫—Ü–∏—è –û–±—Ä–∞–±–æ—Ç–∫–∞–í—ã–∑–æ–≤–∞HTTP–°–µ—Ä–≤–∏—Å–∞(–ó–∞–ø—Ä–æ—Å)
    –ü–æ–ø—ã—Ç–∫–∞
        // –û—Ç—Ä–∏–º—É—î–º–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
        –ü–∞—Ä–∞–º–µ—Ç—Ä—ã–ó–∞–ø—Ä–æ—Å–∞ = –ü–æ–ª—É—á–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä—ã–ò–∑–¢–µ–ª–∞–ó–∞–ø—Ä–æ—Å–∞(–ó–∞–ø—Ä–æ—Å.–ü–æ–ª—É—á–∏—Ç—å–¢–µ–ª–æ–ö–∞–∫–°—Ç—Ä–æ–∫—É());
        
        –î–µ–π—Å—Ç–≤–∏–µ = –ü–∞—Ä–∞–º–µ—Ç—Ä—ã–ó–∞–ø—Ä–æ—Å–∞.–ü–æ–ª—É—á–∏—Ç—å("action");
        –õ–∏–º–∏—Ç = –ß–∏—Å–ª–æ(–ü–∞—Ä–∞–º–µ—Ç—Ä—ã–ó–∞–ø—Ä–æ—Å–∞.–ü–æ–ª—É—á–∏—Ç—å("limit"));
        
        –ï—Å–ª–∏ –õ–∏–º–∏—Ç = 0 –¢–æ–≥–¥–∞
            –õ–∏–º–∏—Ç = 50; // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("üìã –ó–∞–ø–∏—Ç: " + –î–µ–π—Å—Ç–≤–∏–µ + ", –ª—ñ–º—ñ—Ç: " + –õ–∏–º–∏—Ç);
        
        –ï—Å–ª–∏ –î–µ–π—Å—Ç–≤–∏–µ = "getInvoices" –¢–æ–≥–¥–∞
            // –¢–Ü–õ–¨–ö–ò –¢–û–í–ê–†–ù–Ü –ù–ê–ö–õ–ê–î–ù–Ü
            –ú–∞—Å—Å–∏–≤–î–∞–Ω–Ω—ã—Ö = –ü–æ–ª—É—á–∏—Ç—å–¢–æ–≤–∞—Ä–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω—ã–µ–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ();
            
        –ò–Ω–∞—á–µ–ï—Å–ª–∏ –î–µ–π—Å—Ç–≤–∏–µ = "getOutgoingInvoices" –¢–æ–≥–¥–∞
            // –í–°–Ü –†–ê–•–£–ù–ö–ò (—Ç–æ–≤–∞—Ä–∏ + –ø–æ—Å–ª—É–≥–∏)
            –ú–∞—Å—Å–∏–≤–î–∞–Ω–Ω—ã—Ö = –ü–æ–ª—É—á–∏—Ç—å–í—Å—ñ–í–∏—Ö—ñ–¥–Ω—ñ–†–∞—Ö—É–Ω–∫–∏();
            
        –ò–Ω–∞—á–µ
            –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("‚ùå –ù–µ–≤—ñ–¥–æ–º–∞ –¥—ñ—è: " + –î–µ–π—Å—Ç–≤–∏–µ);
            –ú–∞—Å—Å–∏–≤–î–∞–Ω–Ω—ã—Ö = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        // –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ –ª—ñ–º—ñ—Ç
        –ï—Å–ª–∏ –ú–∞—Å—Å–∏–≤–î–∞–Ω–Ω—ã—Ö.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ() > –õ–∏–º–∏—Ç –¢–æ–≥–¥–∞
            –†–µ–∑—É–ª—å—Ç–∞—Ç = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
            –î–ª—è –ò–Ω–¥–µ–∫—Å = 0 –ü–æ –õ–∏–º–∏—Ç - 1 –¶–∏–∫–ª
                –†–µ–∑—É–ª—å—Ç–∞—Ç.–î–æ–±–∞–≤–∏—Ç—å(–ú–∞—Å—Å–∏–≤–î–∞–Ω–Ω—ã—Ö[–ò–Ω–¥–µ–∫—Å]);
            –ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
            –ú–∞—Å—Å–∏–≤–î–∞–Ω–Ω—ã—Ö = –†–µ–∑—É–ª—å—Ç–∞—Ç;
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        // –§–æ—Ä–º—É—î–º–æ JSON –≤—ñ–¥–ø–æ–≤—ñ–¥—å
        –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ " + –ú–∞—Å—Å–∏–≤–î–∞–Ω–Ω—ã—Ö.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ() + " –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤");
        JSON–°—Ç—Ä–æ–∫–∞ = –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å–íJSON(–ú–∞—Å—Å–∏–≤–î–∞–Ω–Ω—ã—Ö);
        
        –û—Ç–≤–µ—Ç = –ù–æ–≤—ã–π HTTP–°–µ—Ä–≤–∏—Å–û—Ç–≤–µ—Ç(200);
        –û—Ç–≤–µ—Ç.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–¢–µ–ª–æ–ò–∑–°—Ç—Ä–æ–∫–∏(JSON–°—Ç—Ä–æ–∫–∞, –ö–æ–¥–∏—Ä–æ–≤–∫–∞–¢–µ–∫—Å—Ç–∞.UTF8);
        –û—Ç–≤–µ—Ç.–ó–∞–≥–æ–ª–æ–≤–∫–∏.–í—Å—Ç–∞–≤–∏—Ç—å("Content-Type", "application/json; charset=utf-8");
        
        –í–æ–∑–≤—Ä–∞—Ç –û—Ç–≤–µ—Ç;
        
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏ = –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏();
        –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("‚ùå –ö–†–ò–¢–ò–ß–ù–ê –ü–û–ú–ò–õ–ö–ê: " + –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏);
        
        –û—Ç–≤–µ—Ç = –ù–æ–≤—ã–π HTTP–°–µ—Ä–≤–∏—Å–û—Ç–≤–µ—Ç(500);
        –û—Ç–≤–µ—Ç.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–¢–µ–ª–æ–ò–∑–°—Ç—Ä–æ–∫–∏("{""error"": ""–í–Ω—É—Ç—Ä—ñ—à–Ω—è –ø–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞""}", –ö–æ–¥–∏—Ä–æ–≤–∫–∞–¢–µ–∫—Å—Ç–∞.UTF8);
        –û—Ç–≤–µ—Ç.–ó–∞–≥–æ–ª–æ–≤–∫–∏.–í—Å—Ç–∞–≤–∏—Ç—å("Content-Type", "application/json; charset=utf-8");
        
        –í–æ–∑–≤—Ä–∞—Ç –û—Ç–≤–µ—Ç;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏
```

## –§—É–Ω–∫—Ü—ñ—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä–Ω–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞)

```1c
–§—É–Ω–∫—Ü–∏—è –ü–æ–ª—É—á–∏—Ç—å–¢–æ–≤–∞—Ä–Ω—ã–µ–ù–∞–∫–ª–∞–¥–Ω—ã–µ–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ()
    –ü–æ–ø—ã—Ç–∫–∞
        –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("üîç –ü–æ—á–∞—Ç–æ–∫ –ø–æ—à—É–∫—É –¢–Ü–õ–¨–ö–ò —Ç–æ–≤–∞—Ä–Ω–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è)...");
        
        –ó–∞–ø—Ä–æ—Å = –ù–æ–≤—ã–π –ó–∞–ø—Ä–æ—Å;
        –ó–∞–ø—Ä–æ—Å.–¢–µ–∫—Å—Ç = "
        |–í–´–ë–†–ê–¢–¨
        |    –î–æ–∫.–°—Å—ã–ª–∫–∞ –ö–ê–ö –°—Å—ã–ª–∫–∞–î–æ–∫—É–º–µ–Ω—Ç–∞,
        |    –î–æ–∫.–ù–æ–º–µ—Ä –ö–ê–ö –ù–æ–º–µ—Ä–î–æ–∫—É–º–µ–Ω—Ç–∞,
        |    –î–æ–∫.–î–∞—Ç–∞ –ö–ê–ö –î–∞—Ç–∞–î–æ–∫—É–º–µ–Ω—Ç–∞,
        |    –í–´–ë–û–†
        |        –ö–û–ì–î–ê –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ <> """"
        |        –¢–û–ì–î–ê –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
        |        –ò–ù–ê–ß–ï ""–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ""
        |    –ö–û–ù–ï–¶ –ö–ê–ö –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫,
        |    –î–æ–∫.–°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞ –ö–ê–ö –°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞,
        |    –í–∞–ª—é—Ç—ã.–ö–æ–¥ –ö–ê–ö –ö–æ–¥–í–∞–ª—é—Ç—ã
        |–ò–ó
        |    –î–æ–∫—É–º–µ–Ω—Ç.–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–¢–æ–≤–∞—Ä–æ–≤–ò–£—Å–ª—É–≥ –ö–ê–ö –î–æ–∫
        |    –õ–ï–í–û–ï –°–û–ï–î–ò–ù–ï–ù–ò–ï –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã –ö–ê–ö –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã
        |        –ü–û –î–æ–∫.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç = –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã.–°—Å—ã–ª–∫–∞
        |    –õ–ï–í–û–ï –°–û–ï–î–ò–ù–ï–ù–ò–ï –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫.–í–∞–ª—é—Ç—ã –ö–ê–ö –í–∞–ª—é—Ç—ã
        |        –ü–û –î–æ–∫.–í–∞–ª—é—Ç–∞–î–æ–∫—É–º–µ–Ω—Ç–∞ = –í–∞–ª—é—Ç—ã.–°—Å—ã–ª–∫–∞
        |–ì–î–ï
        |    –î–æ–∫.–î–∞—Ç–∞ >= &–î–∞—Ç–∞–ù–∞—á–∞–ª–∞
        |    –ò –î–æ–∫.–ü—Ä–æ–≤–µ–¥–µ–Ω = –ò–°–¢–ò–ù–ê
        |    –ò –ï–°–¢–¨NULL(–î–æ–∫.–ü–æ–º–µ—Ç–∫–∞–£–¥–∞–ª–µ–Ω–∏—è, –õ–û–ñ–¨) = –õ–û–ñ–¨
        |    // –§–Ü–õ–¨–¢–†: —Ç—ñ–ª—å–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∑ —Ç–æ–≤–∞—Ä–Ω–∏–º–∏ –ø–æ–∑–∏—Ü—ñ—è–º–∏ (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è)
        |    –ò –î–æ–∫.–°—Å—ã–ª–∫–∞ –í (
        |        –í–´–ë–†–ê–¢–¨ –†–ê–ó–õ–ò–ß–ù–´–ï
        |            –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–°—Å—ã–ª–∫–∞
        |        –ò–ó
        |            –î–æ–∫—É–º–µ–Ω—Ç.–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–¢–æ–≤–∞—Ä–æ–≤–ò–£—Å–ª—É–≥.–¢–æ–≤–∞—Ä—ã –ö–ê–ö –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å
        |        –ì–î–ï
        |            –ù–ï (–í–†–µ–≥(–¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ) –ü–û–î–û–ë–ù–û ""%–ü–û–°–õ–£–ì%""
        |                –ò–õ–ò –í–†–µ–≥(–¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ) –ü–û–î–û–ë–ù–û ""%–£–°–õ–£–ì%""
        |                –ò–õ–ò –í–†–µ–≥(–¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ) –ü–û–î–û–ë–ù–û ""%–†–û–ë–û–¢%""
        |                –ò–õ–ò –í–†–µ–≥(–¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ) –ü–û–î–û–ë–ù–û ""%–†–ê–ë–û–¢%"")
        |    )
        |–£–ü–û–†–Ø–î–û–ß–ò–¢–¨ –ü–û
        |    –î–æ–∫.–î–∞—Ç–∞ –£–ë–´–í
        |";
        
        // –û—Å—Ç–∞–Ω–Ω—ñ 3 –º—ñ—Å—è—Ü—ñ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
        –î–∞—Ç–∞–ù–∞—á–∞–ª–∞ = –¢–µ–∫—É—â–∞—è–î–∞—Ç–∞() - 90*24*3600;
        –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–î–∞—Ç–∞–ù–∞—á–∞–ª–∞", –î–∞—Ç–∞–ù–∞—á–∞–ª–∞);
        
        –†–µ–∑—É–ª—å—Ç–∞—Ç = –ó–∞–ø—Ä–æ—Å.–í—ã–ø–æ–ª–Ω–∏—Ç—å();
        –í—ã–±–æ—Ä–∫–∞ = –†–µ–∑—É–ª—å—Ç–∞—Ç.–í—ã–±—Ä–∞—Ç—å();
        
        –ú–∞—Å—Å–∏–≤–ù–∞–∫–ª–∞–¥–Ω—ã—Ö = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
        
        –ü–æ–∫–∞ –í—ã–±–æ—Ä–∫–∞.–°–ª–µ–¥—É—é—â–∏–π() –¶–∏–∫–ª
            // –û—Ç—Ä–∏–º—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —Ç–æ–≤–∞—Ä–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó
            –¢–æ–≤–∞—Ä–Ω—ã–µ–ü–æ–∑–∏—Ü–∏–∏ = –ü–æ–ª—É—á–∏—Ç—å–¢–æ–≤–∞—Ä–Ω—ã–µ–ü–æ–∑–∏—Ü–∏–∏–ù–∞–∫–ª–∞–¥–Ω–æ–π–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ(–í—ã–±–æ—Ä–∫–∞.–°—Å—ã–ª–∫–∞–î–æ–∫—É–º–µ–Ω—Ç–∞);
            
            // –ü—Ä–æ–ø—É—Å–∫–∞—î–º–æ —è–∫—â–æ –Ω–µ–º–∞—î —Ç–æ–≤–∞—Ä–Ω–∏—Ö –ø–æ–∑–∏—Ü—ñ–π
            –ï—Å–ª–∏ –¢–æ–≤–∞—Ä–Ω—ã–µ–ü–æ–∑–∏—Ü–∏–∏.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ() = 0 –¢–æ–≥–¥–∞
                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å;
            –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
            
            –ù–∞–∫–ª–∞–¥–Ω–∞—è = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
            –ù–∞–∫–ª–∞–¥–Ω–∞—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ù–æ–º–µ—Ä–î–æ–∫—É–º–µ–Ω—Ç–∞", –í—ã–±–æ—Ä–∫–∞.–ù–æ–º–µ—Ä–î–æ–∫—É–º–µ–Ω—Ç–∞);
            –ù–∞–∫–ª–∞–¥–Ω–∞—è.–í—Å—Ç–∞–≤–∏—Ç—å("–î–∞—Ç–∞–î–æ–∫—É–º–µ–Ω—Ç–∞", –§–æ—Ä–º–∞—Ç(–í—ã–±–æ—Ä–∫–∞.–î–∞—Ç–∞–î–æ–∫—É–º–µ–Ω—Ç–∞, "–î–§=yyyy-MM-dd"));
            –ù–∞–∫–ª–∞–¥–Ω–∞—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫", –í—ã–±–æ—Ä–∫–∞.–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫);
            –ù–∞–∫–ª–∞–¥–Ω–∞—è.–í—Å—Ç–∞–≤–∏—Ç—å("–°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞", –í—ã–±–æ—Ä–∫–∞.–°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞);
            –ù–∞–∫–ª–∞–¥–Ω–∞—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–¥–í–∞–ª—é—Ç—ã", –í—ã–±–æ—Ä–∫–∞.–ö–æ–¥–í–∞–ª—é—Ç—ã);
            –ù–∞–∫–ª–∞–¥–Ω–∞—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ü–æ–∑–∏—Ü—ñ—ó", –¢–æ–≤–∞—Ä–Ω—ã–µ–ü–æ–∑–∏—Ü–∏–∏);
            –ù–∞–∫–ª–∞–¥–Ω–∞—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ö—ñ–ª—å–∫—ñ—Å—Ç—å–¢–æ–≤–∞—Ä—ñ–≤", –¢–æ–≤–∞—Ä–Ω—ã–µ–ü–æ–∑–∏—Ü–∏–∏.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ());
            
            –ú–∞—Å—Å–∏–≤–ù–∞–∫–ª–∞–¥–Ω—ã—Ö.–î–æ–±–∞–≤–∏—Ç—å(–ù–∞–∫–ª–∞–¥–Ω–∞—è);
        –ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
        
        –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ " + –ú–∞—Å—Å–∏–≤–ù–∞–∫–ª–∞–¥–Ω—ã—Ö.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ() + " —Ç–æ–≤–∞—Ä–Ω–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è)");
        –í–æ–∑–≤—Ä–∞—Ç –ú–∞—Å—Å–∏–≤–ù–∞–∫–ª–∞–¥–Ω—ã—Ö;
        
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏ = –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏();
        –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä–Ω–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö: " + –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏);
        –í–æ–∑–≤—Ä–∞—Ç –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏
```

## –§—É–Ω–∫—Ü—ñ—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä–Ω–∏—Ö –ø–æ–∑–∏—Ü—ñ–π (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞)

```1c
–§—É–Ω–∫—Ü–∏—è –ü–æ–ª—É—á–∏—Ç—å–¢–æ–≤–∞—Ä–Ω—ã–µ–ü–æ–∑–∏—Ü–∏–∏–ù–∞–∫–ª–∞–¥–Ω–æ–π–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ(–°—Å—ã–ª–∫–∞–î–æ–∫—É–º–µ–Ω—Ç–∞)
    –ü–æ–ø—ã—Ç–∫–∞
        –ó–∞–ø—Ä–æ—Å = –ù–æ–≤—ã–π –ó–∞–ø—Ä–æ—Å;
        –ó–∞–ø—Ä–æ—Å.–¢–µ–∫—Å—Ç = "
        |–í–´–ë–†–ê–¢–¨
        |    –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ö–ê–ö –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–¢–æ–≤–∞—Ä–∞,
        |    –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ö–ê–ö –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ,
        |    –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–¶–µ–Ω–∞ –ö–ê–ö –¶–µ–Ω–∞,
        |    –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–°—É–º–º–∞ –ö–ê–ö –°—É–º–º–∞,
        |    –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ö–æ–¥ –ö–ê–ö –ö–æ–¥–¢–æ–≤–∞—Ä–∞
        |–ò–ó
        |    –î–æ–∫—É–º–µ–Ω—Ç.–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–¢–æ–≤–∞—Ä–æ–≤–ò–£—Å–ª—É–≥.–¢–æ–≤–∞—Ä—ã –ö–ê–ö –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å
        |–ì–î–ï
        |    –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–°—Å—ã–ª–∫–∞ = &–°—Å—ã–ª–∫–∞–î–æ–∫—É–º–µ–Ω—Ç–∞
        |    // –¢–Ü–õ–¨–ö–ò –¢–û–í–ê–†–ò (–≤–∏–∫–ª—é—á–∞—î–º–æ –ø–æ—Å–ª—É–≥–∏ –∑–∞ –Ω–∞–∑–≤–æ—é) - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è
        |    –ò –ù–ï (–í–†–µ–≥(–¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ) –ü–û–î–û–ë–ù–û ""%–ü–û–°–õ–£–ì%""
        |        –ò–õ–ò –í–†–µ–≥(–¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ) –ü–û–î–û–ë–ù–û ""%–£–°–õ–£–ì%""
        |        –ò–õ–ò –í–†–µ–≥(–¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ) –ü–û–î–û–ë–ù–û ""%–†–û–ë–û–¢%""
        |        –ò–õ–ò –í–†–µ–≥(–¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ) –ü–û–î–û–ë–ù–û ""%–†–ê–ë–û–¢%"")
        |–£–ü–û–†–Ø–î–û–ß–ò–¢–¨ –ü–û
        |    –¢–∞–±–ª–∏—á–Ω–∞—è–ß–∞—Å—Ç—å.–ù–æ–º–µ—Ä–°—Ç—Ä–æ–∫–∏
        |";
        
        –ó–∞–ø—Ä–æ—Å.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä("–°—Å—ã–ª–∫–∞–î–æ–∫—É–º–µ–Ω—Ç–∞", –°—Å—ã–ª–∫–∞–î–æ–∫—É–º–µ–Ω—Ç–∞);
        –†–µ–∑—É–ª—å—Ç–∞—Ç = –ó–∞–ø—Ä–æ—Å.–í—ã–ø–æ–ª–Ω–∏—Ç—å();
        –í—ã–±–æ—Ä–∫–∞ = –†–µ–∑—É–ª—å—Ç–∞—Ç.–í—ã–±—Ä–∞—Ç—å();
        
        –ú–∞—Å—Å–∏–≤–ü–æ–∑–∏—Ü–∏–π = –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
        
        –ü–æ–∫–∞ –í—ã–±–æ—Ä–∫–∞.–°–ª–µ–¥—É—é—â–∏–π() –¶–∏–∫–ª
            –ü–æ–∑–∏—Ü–∏—è = –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–¢–æ–≤–∞—Ä–∞", –í—ã–±–æ—Ä–∫–∞.–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–¢–æ–≤–∞—Ä–∞);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ", –í—ã–±–æ—Ä–∫–∞.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–¶–µ–Ω–∞", –í—ã–±–æ—Ä–∫–∞.–¶–µ–Ω–∞);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–°—É–º–º–∞", –í—ã–±–æ—Ä–∫–∞.–°—É–º–º–∞);
            –ü–æ–∑–∏—Ü–∏—è.–í—Å—Ç–∞–≤–∏—Ç—å("–ö–æ–¥–¢–æ–≤–∞—Ä–∞", –í—ã–±–æ—Ä–∫–∞.–ö–æ–¥–¢–æ–≤–∞—Ä–∞);
            
            –ú–∞—Å—Å–∏–≤–ü–æ–∑–∏—Ü–∏–π.–î–æ–±–∞–≤–∏—Ç—å(–ü–æ–∑–∏—Ü–∏—è);
        –ö–æ–Ω–µ—Ü–¶–∏–∫–ª–∞;
        
        –í–æ–∑–≤—Ä–∞—Ç –ú–∞—Å—Å–∏–≤–ü–æ–∑–∏—Ü–∏–π;
        
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π –Ω–∞–∫–ª–∞–¥–Ω–æ—ó: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
        –í–æ–∑–≤—Ä–∞—Ç –ù–æ–≤—ã–π –ú–∞—Å—Å–∏–≤;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏
```

## –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

```1c
–§—É–Ω–∫—Ü–∏—è –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å–íJSON(–î–∞–Ω–Ω—ã–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        // –°–ø—Ä–æ–±—É—î–º–æ –Ω–æ–≤–∏–π –º–µ—Ç–æ–¥ (1–° 8.3.15+)
        –ó–∞–ø–∏—Å—åJSON = –ù–æ–≤—ã–π –ó–∞–ø–∏—Å—åJSON;
        –ó–∞–ø–∏—Å—åJSON.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–°—Ç—Ä–æ–∫—É();
        –ó–∞–ø–∏—Å–∞—Ç—åJSON(–ó–∞–ø–∏—Å—åJSON, –î–∞–Ω–Ω—ã–µ);
        –í–æ–∑–≤—Ä–∞—Ç –ó–∞–ø–∏—Å—åJSON.–ó–∞–∫—Ä—ã—Ç—å();
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        // Fallback –¥–ª—è —Å—Ç–∞—Ä–∏—Ö –≤–µ—Ä—Å—ñ–π
        –í–æ–∑–≤—Ä–∞—Ç XML–°—Ç—Ä–æ–∫–∞(–î–∞–Ω–Ω—ã–µ);
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏

–§—É–Ω–∫—Ü–∏—è –ü–æ–ª—É—á–∏—Ç—å–ü–∞—Ä–∞–º–µ—Ç—Ä—ã–ò–∑–¢–µ–ª–∞–ó–∞–ø—Ä–æ—Å–∞(–¢–µ–ª–æ–ó–∞–ø—Ä–æ—Å–∞)
    –ü–æ–ø—ã—Ç–∫–∞
        –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("üì• –û—Ç—Ä–∏–º–∞–Ω–æ —Ç—ñ–ª–æ –∑–∞–ø–∏—Ç—É: " + –¢–µ–ª–æ–ó–∞–ø—Ä–æ—Å–∞);
        
        –ß—Ç–µ–Ω–∏–µJSON = –ù–æ–≤—ã–π –ß—Ç–µ–Ω–∏–µJSON;
        –ß—Ç–µ–Ω–∏–µJSON.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–°—Ç—Ä–æ–∫—É(–¢–µ–ª–æ–ó–∞–ø—Ä–æ—Å–∞);
        –ü–∞—Ä–∞–º–µ—Ç—Ä—ã = –ü—Ä–æ—á–∏—Ç–∞—Ç—åJSON(–ß—Ç–µ–Ω–∏–µJSON);
        –ß—Ç–µ–Ω–∏–µJSON.–ó–∞–∫—Ä—ã—Ç—å();
        
        –í–æ–∑–≤—Ä–∞—Ç –ü–∞—Ä–∞–º–µ—Ç—Ä—ã;
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª("‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥—É JSON: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏());
        –í–æ–∑–≤—Ä–∞—Ç –ù–æ–≤—ã–π –°—Ç—Ä—É–∫—Ç—É—Ä–∞;
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏

–§—É–Ω–∫—Ü–∏—è –ó–∞–ø–∏—Å–∞—Ç—å–í–õ–æ–≥–§–∞–π–ª(–°–æ–æ–±—â–µ–Ω–∏–µ)
    –ü–æ–ø—ã—Ç–∫–∞
        –¢–µ–∫—Å—Ç–§–∞–π–ª–∞ = –ù–æ–≤—ã–π –¢–µ–∫—Å—Ç–æ–≤—ã–π–î–æ–∫—É–º–µ–Ω—Ç;
        –ò–º—è–§–∞–π–ª–∞ = "c:\temp\erp_debug.txt";
        
        –ü–æ–ø—ã—Ç–∫–∞
            –¢–µ–∫—Å—Ç–§–∞–π–ª–∞.–ü—Ä–æ—á–∏—Ç–∞—Ç—å(–ò–º—è–§–∞–π–ª–∞);
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            // –§–∞–π–ª –Ω–µ —ñ—Å–Ω—É—î, —Å—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
        
        –í—Ä–µ–º—è–ú–µ—Ç–∫–∞ = –§–æ—Ä–º–∞—Ç(–¢–µ–∫—É—â–∞—è–î–∞—Ç–∞–°–µ–∞–Ω—Å–∞(), "–î–§=dd.MM.yyyy –ß–ß:–º–º:—Å—Å");
        –ù–æ–≤–∏–π–†—è–¥–æ–∫ = "[" + –í—Ä–µ–º—è–ú–µ—Ç–∫–∞ + "] " + –°–æ–æ–±—â–µ–Ω–∏–µ;
        
        –¢–µ–∫—Å—Ç–§–∞–π–ª–∞.–î–æ–±–∞–≤–∏—Ç—å–°—Ç—Ä–æ–∫—É(–ù–æ–≤–∏–π–†—è–¥–æ–∫);
        –¢–µ–∫—Å—Ç–§–∞–π–ª–∞.–ó–∞–ø–∏—Å–∞—Ç—å(–ò–º—è–§–∞–π–ª–∞);
        
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        // –Ü–≥–Ω–æ—Ä—É—î–º–æ –ø–æ–º–∏–ª–∫–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
–ö–æ–Ω–µ—Ü–§—É–Ω–∫—Ü–∏–∏
```

## –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—é

1. **–ó–∞–º—ñ–Ω—ñ—Ç—å —Å—Ç–∞—Ä—ñ —Ñ—É–Ω–∫—Ü—ñ—ó** –Ω–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –≤–µ—Ä—Å—ñ—ó
2. **–ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ** –∑–∞–ø–∏—Ç `getInvoices` - —Ç–µ–ø–µ—Ä –≤—ñ–Ω –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥** c:\temp\erp_debug.txt –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. **–î–ª—è –≤–∏—Ö—ñ–¥–Ω–∏—Ö —Ä–∞—Ö—É–Ω–∫—ñ–≤** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é `–ü–æ–ª—É—á–∏—Ç—å–í—Å—ñ–í–∏—Ö—ñ–¥–Ω—ñ–†–∞—Ö—É–Ω–∫–∏` (–±–µ–∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó)

## –©–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

- ‚úÖ –ó–∞–º—ñ–Ω–µ–Ω–æ `–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ.–¢–∏–ø—ã–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã.–¢–æ–≤–∞—Ä` –Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –∑–∞ –Ω–∞–∑–≤–æ—é
- ‚úÖ –í–∏–∫–ª—é—á–∞—é—Ç—å—Å—è –ø–æ–∑–∏—Ü—ñ—ó –∑ –Ω–∞–∑–≤–∞–º–∏: –ü–û–°–õ–£–ì, –£–°–õ–£–ì, –†–û–ë–û–¢, –†–ê–ë–û–¢
- ‚úÖ –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–æ–≥—ñ–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ç—ñ–ª—å–∫–∏ –¥–ª—è –≤—Ö—ñ–¥–Ω–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö
- ‚úÖ –í–∏—Ö—ñ–¥–Ω—ñ —Ä–∞—Ö—É–Ω–∫–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –±–µ–∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó (—Ç–æ–≤–∞—Ä–∏ + –ø–æ—Å–ª—É–≥–∏)