#!/usr/bin/env node

// –ü—Ä–æ—Å—Ç–∏–π —Ç–µ—Å—Ç –¥–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –∑ 1C fallback –ª–æ–≥—ñ–∫–æ—é
// –°–∏–º—É–ª—é—î–º–æ –≤–∏–∫–ª–∏–∫–∏ –¥–æ get1COutgoingInvoices

console.log('üß™ –¢–ï–°–¢: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–∫–∏ 1C –≤–∏—Ö—ñ–¥–Ω–∏—Ö —Ä–∞—Ö—É–Ω–∫—ñ–≤');

// –°–∏–º—É–ª—É—î–º–æ —É—Å–ø—ñ—à–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ 1–°
const simulateReal1CResponse = () => {
  console.log('\nüìä –°–¶–ï–ù–ê–†–Ü–ô 1: –£—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ 1–°');
  
  const mockRealData = {
    invoices: [
      {
        invoiceNumber: "–†–ú00-027688", 
        client: "–¢–û–í –†–ï–ê–õ–¨–ù–ò–ô –ö–õ–Ü–Ñ–ù–¢",
        amount: "9072.00",
        currency: "980",
        date: "2025-07-11",
        status: "confirmed",
        positions: [
          {
            productName: "–ú–µ—Ç–∞–ª –ø—Ä–æ—Ñ—ñ–ª—å —Ä–µ–∞–ª—å–Ω–∏–π",
            quantity: 10,
            price: 907.20,
            total: 9072.00
          }
        ]
      }
    ],
    total: 1,
    timestamp: new Date().toISOString()
  };
  
  console.log('‚úÖ –†–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∑ 1–°:', JSON.stringify(mockRealData, null, 2));
  console.log('üéØ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –°–∏—Å—Ç–µ–º–∞ –º–∞—î –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ü—ñ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ');
  
  return mockRealData;
};

// –°–∏–º—É–ª—É—î–º–æ –ø–æ–º–∏–ª–∫—É –º–µ—Ä–µ–∂—ñ
const simulateNetworkError = () => {
  console.log('\n‚ùå –°–¶–ï–ù–ê–†–Ü–ô 2: –ü–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ (1–° –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)');
  
  const networkError = new TypeError('fetch failed: ENOTFOUND baf.regmik.ua');
  console.log('üí• –ú–µ—Ä–µ–∂–µ–≤–∞ –ø–æ–º–∏–ª–∫–∞:', networkError.message);
  console.log('üéØ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Fallback –¥–∞–Ω—ñ');
  
  throw networkError;
};

// –°–∏–º—É–ª—É—î–º–æ timeout –ø–æ–º–∏–ª–∫—É  
const simulateTimeoutError = () => {
  console.log('\n‚è∞ –°–¶–ï–ù–ê–†–Ü–ô 3: Timeout –ø–æ–º–∏–ª–∫–∞');
  
  const timeoutError = new Error('–¢–∞–π–º-–∞—É—Ç –∑–∞–ø–∏—Ç—É –¥–æ 1–° –ø—ñ—Å–ª—è 8 —Å–µ–∫—É–Ω–¥');
  console.log('üí• Timeout –ø–æ–º–∏–ª–∫–∞:', timeoutError.message);
  console.log('üéØ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Fallback –¥–∞–Ω—ñ');
  
  throw timeoutError;
};

// –¢–µ—Å—Ç—É—î–º–æ –ª–æ–≥—ñ–∫—É
console.log('\nüîß –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê –ü–û–¢–û–ß–ù–û–á –ü–†–û–ë–õ–ï–ú–ò:');
console.log('‚ùå –°–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∂–¥–∏ –ø–æ–∫–∞–∑—É—î fallback –¥–∞–Ω—ñ (–†–ü-000001, –†–ü-000002)');
console.log('‚úÖ –ú–∞—î –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∫–æ–ª–∏ 1–° –¥–æ—Å—Ç—É–ø–Ω–∞ (–†–ú00-027688)');

console.log('\nüí° –ü–Ü–î–û–ó–†–ê:');
console.log('- get1COutgoingInvoices() –º–æ–∂–µ –ø–µ—Ä–µ–¥—á–∞—Å–Ω–æ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ fallback');
console.log('- routes.ts –º–æ–∂–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ —É—Å–ø—ñ—à–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ');
console.log('- frontend –º–æ–∂–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫–µ—à–æ–≤–∞–Ω—ñ fallback –¥–∞–Ω—ñ');

try {
  simulateReal1CResponse();
  console.log('\n‚úÖ –í–ò–°–ù–û–í–û–ö: –Ø–∫—â–æ 1–° –ø–æ–≤–µ—Ä—Ç–∞—î –¥–∞–Ω—ñ - —Å–∏—Å—Ç–µ–º–∞ –º–∞—î —ó—Ö –ø–æ–∫–∞–∑–∞—Ç–∏');
} catch (error) {
  console.log('\n‚ùå –ù–µ–æ—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–º–∏–ª–∫–∞ –≤ —Ç–µ—Å—Ç—ñ:', error);
}

console.log('\nüîç –ù–ê–°–¢–£–ü–ù–Ü –ö–†–û–ö–ò:');
console.log('1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ get1COutgoingInvoices() –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–ª—è—î —É—Å–ø—ñ—à–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ');
console.log('2. –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è —â–æ routes.ts –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î fallback –ø—Ä–∏ —É—Å–ø—ñ—Ö—É');
console.log('3. –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à frontend —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ');